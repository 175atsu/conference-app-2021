import io.github.droidkaigi.confsched2021.news.Dep

plugins {
    id("com.android.library")
    id("kotlin-multiplatform")
    id("kotlinx-serialization")
}

android {
    compileSdkVersion 30
    buildToolsVersion "30.0.0"

    defaultConfig {
        minSdkVersion 21
        targetSdkVersion 30
    }
}

kotlin {
    targets {
        fromPreset(presets.android, 'android')
        fromPreset(presets.jvm, 'jvm')
    }
    android()
    sourceSets {
        commonMain.dependencies {
            implementation Dep.ktor
            implementation Dep.ktorJson
            implementation Dep.ktorSerialization
            implementation "org.jetbrains.kotlinx:kotlinx-coroutines-core:1.3.7-1.4-rc"
            implementation "org.jetbrains.kotlinx:kotlinx-serialization-runtime:1.0-M1-1.4.0-rc"
            api project(":model")
        }
        commonTest.dependencies {
            implementation "org.jetbrains.kotlin:kotlin-test-common"
            implementation "org.jetbrains.kotlin:kotlin-test-annotations-common"
        }
        jvmTest.dependencies {
            implementation "org.jetbrains.kotlin:kotlin-test-junit"
        }
    }
}